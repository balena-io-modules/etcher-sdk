# Change Log

All notable changes to this project will be documented in this file
automatically by Versionist. DO NOT EDIT THIS FILE MANUALLY!
This project adheres to [Semantic Versioning](http://semver.org/).

## 8.7.2 - 2023-10-07

* Add failover to Windows from flash-boot partition [Ken Bannister]

## 8.7.1 - 2023-09-07


<details>
<summary> Update dependency node-raspberrypi-usbboot to v1.0.7 [Self-hosted Renovate Bot] </summary>

> ### node-raspberrypi-usbboot-1.0.7 - 2023-06-01
> 
> * Update flowzone.yml [Kyle Harding]
> 

</details>

## 8.7.0 - 2023-08-13

* Update migrator README and bump minor version [Ken Bannister]

## 8.6.3 - 2023-08-13

* Add ability to migrate network configuration [Ken Bannister]
* Add ability to set/clear drive letter on Windows [Ken Bannister]

## 8.6.2 - 2023-06-22

* Refine migrate() function [Ken Bannister]
* Rework findVolume() so localization independent [Ken Bannister]

## 8.6.1 - 2023-05-19

* Establish contract for diskpart functions [Ken Bannister]

## 8.6.0 - 2023-05-19

* Migrator: setup task sequence [Ken Bannister]

## 8.5.4 - 2023-05-18

* stop diskpart.clean() from breaking CLI  flash cmd [rcooke-warwick]

## 8.5.3 - 2023-04-14

* Convert migrator partition size calculations to use bytes [Ken Bannister]
* Determine required free space from image file partitions [Ken Bannister]
* Add function to calculate required partition size from an image file [Ken Bannister]
* Verify image file exists before begin migration [Ken Bannister]

## 8.5.2 - 2023-04-10

* Minor formatting updates for migrator script [Ken Bannister]
* Integrate check for unallocated space into migrator [Ken Bannister]
* Add function to provide unallocated space on disk [Ken Bannister]

## 8.5.1 - 2023-03-16

* Add README for new migrator feature [Ken Bannister]

## 8.5.0 - 2023-03-16

* Add feature to migrate this computer to run balenaOS [Ken Bannister]
* Add parameter for starting offset for write [Ken Bannister]
* Add parameter to clear partition table when open device [Ken Bannister]
* Add shrink and create partition functions [Ken Bannister]

## 8.4.1 - 2023-03-09

* patch: revert unbzip2-stream to #4a54f56a25b58950f9e4277c56db2912d62242e7 [Edwin Joassart]

## 8.4.0 - 2023-03-09

* fix(deps): update unbzip2-stream digest to a584ac3 [Renovate Bot]

## 8.3.1 - 2023-03-02

* patch: fix accept-enconding to prevent CF proxy decompression [JOASSART Edwin]

## 8.3.0 - 2023-02-13

* minor: updated winusb to NAPI [mcraa]

## 8.2.0 - 2023-01-20

* chore(deps): update node.js to 18.13.0 [Renovate Bot]

## 8.1.0 - 2023-01-20

* Update drivelist [Akis Kesoglou]
* Update winusb-driver-generator [Akis Kesoglou]
* Remove dependency on node-crc-utils [Akis Kesoglou]

## 8.0.0 - 2023-01-20

* Drop support for Node 14 and add Node 18 [Akis Kesoglou]

## 7.4.8 - 2023-01-16

* patch: cm4 start4.elf update [Peter Makra]

## 7.4.7 - 2023-01-11

* patch: update usbboot second stage check; fixed winusb version [Peter Makra]

## 7.4.6 - 2023-01-02

* patch: version bump npm release [mcraa]

## 7.4.5 - 2023-01-02

* patch: reverted unbzip2 to fork [Peter Makra]
* patch: eliminated one stream to buffer with bumping file-type version [Peter Makra]
* patch: aligned error for directories [Peter Makra]
* patch: WIP handle error when can't read mime or partition for metadata [Peter Makra]

## 7.4.4 - 2022-12-23

* Patch: version bump [builder555]

## 7.4.3 - 2022-12-23

* patch: downgraded drivelist to 9.2.4 [Peter Makra]

## 7.4.2 - 2022-11-04

* update drivelist and node-raspberypi-usbboot dependencies [Zane Hitchcox]

## 7.4.1 - 2022-10-25

* Update dependency typedoc-plugin-markdown to 2.4.2 [Renovate Bot]

## 7.4.0 - 2022-10-25

* Update dependency axios to 0.27.2 [Renovate Bot]

## 7.3.0 - 2022-10-25

* Update dependency outdent to 0.8.0 [Renovate Bot]

## 7.2.4 - 2022-10-25

* Update dependency @types/debug to 0.0.31 [Renovate Bot]

## 7.2.3 - 2022-10-25

* bump node-beaglebone-usbboot [Zane Hitchcox]

## 7.2.2 - 2022-10-25

* Switch to Flowzone [ab77]

## 7.2.1 - 2022-09-22

* add arch in metadata [Edwin Joassart]

## 7.2.0 - 2022-04-19

* lockfile 2 working [Zane Hitchcox]

## 7.1.1 - 2022-04-13

* source: add imageType property [Joseph Kogut]

## 7.1.0 - 2022-02-22

* Support detecting unified and semver normalized ESR version schemes [Thodoris Greasidis]

## 7.0.1 - 2022-01-31

* package: Update node-raspberrypi-usbboot module [Alexandru Costache]

## 7.0.0 - 2021-11-11

* patch: Add node16 tests [Lorenzo Alberto Maria Ambrosi]
* patch: Update lzma-native to v8.0.3 [Lorenzo Alberto Maria Ambrosi]
* patch: Add node14 linux tests [Lorenzo Alberto Maria Ambrosi]
* minor: Update @balena/udif from v1.1.1 to v1.1.2 [Lorenzo Alberto Maria Ambrosi]
* patch: Bump node-beaglebone-usbboot version [Lorenzo Alberto Maria Ambrosi]
* patch: Update dependencies for new lockfile [Lorenzo Alberto Maria Ambrosi]
* major: Update usbboot packages for tessel/node-usb [Lorenzo Alberto Maria Ambrosi]

## 6.3.0 - 2021-10-13

* patch: Add cross-platform test [Lorenzo Alberto Maria Ambrosi]
* minor: Temporarily disable bz2 tests [Lorenzo Alberto Maria Ambrosi]
* Fix Http requests methods, allow to override it [JSReds]
* Add possible alternative fileName to getInfo request [JSReds]

## 6.2.5 - 2021-09-17

* patch: Fix missing build folder in published package [Lorenzo Alberto Maria Ambrosi]

## 6.2.4 - 2021-09-15

* patch: Fix missing optional dependency [Lorenzo Alberto Maria Ambrosi]

## 6.2.3 - 2021-09-14

* patch: Prettify files [Lorenzo Alberto Maria Ambrosi]
* Update documentation [Lorenzo Alberto Maria Ambrosi]
* readme: explain elevated premissions requirements [Forest Johnson]
* patch: add support for basic auth [Marco FÃ¼llemann]
* Remove extraneous code [Zane Hitchcox]
* Convert inherits to class for stronger type-checking [Zane Hitchcox]
* Add xxhash3 checksum algorithm for faster verification [Zane Hitchcox]
* Make doc command cross-platform [Lorenzo Alberto Maria Ambrosi]

## 6.2.2 - 2021-06-30

* Delete .github directory [dfunckt]

## 6.2.1 - 2021-03-26


<details>
<summary> Update node-raspberrypi-usbboot from 0.2.11 to 0.3.0 [Alexis Svinartchouk] </summary>

> ### node-raspberrypi-usbboot-0.3.0 - 2021-03-26
> 
> * Add support for compute module 4 [Alexis Svinartchouk]
> * Fix size endianness of boot_message_t message [Alexis Svinartchouk]
> 
</details>

## 6.2.0 - 2021-02-18

* Added BeagleBone USB Boot example [Parthiban Gandhi]
* Added BeagleBone USB Boot support [Parthiban Gandhi]

## 6.1.1 - 2021-02-10


<details>
<summary> Update node-raspberrypi-usbboot from 0.2.10 to 0.2.11 [Alexis Svinartchouk] </summary>

> ### node-raspberrypi-usbboot-0.2.11 - 2021-02-10
> 
> * Update @balena.io/usb from 1.3.12 to 1.3.14 [Alexis Svinartchouk]
> 
</details>

## 6.1.0 - 2021-02-03

* Prefix temporary decompressed images filenames [Alexis Svinartchouk]

## 6.0.1 - 2021-02-02

* Ignore ENOENT errors on unlink in withTmpFile [Alexis Svinartchouk]

## 6.0.0 - 2021-02-01

* Export tmp and add prefix and postfix options [Alexis Svinartchouk]

## 5.2.3 - 2021-01-26

* upgrade lint [Zane Hitchcox]

## 5.2.2 - 2021-01-19


<details>
<summary> Update drivelist from 9.2.2 to 9.2.4 [Alexis Svinartchouk] </summary>

> ### drivelist-9.2.4 - 2021-01-19
> 
> * Pass strings between methods as std::string instead of char * [Floris Bos]
> 
> ### drivelist-9.2.3 - 2021-01-19
> 
> * Support lsblk versions that do no support the pttype column [Alexis Svinartchouk]
> 
</details>

## 5.2.1 - 2021-01-15

* Only run one diskpart at a time [Alexis Svinartchouk]
* Ignore diskpart VDS_E_DISK_IS_OFFLINE errors [Alexis Svinartchouk]

## 5.2.0 - 2021-01-06

* Store progress on usbboot devices [Alexis Svinartchouk]

## 5.1.12 - 2021-01-06

* Remove BlockDevice.mountpoints incorrect typing [Alexis Svinartchouk]
* Update axios to 0.21.1 and aws4-axios to 2.0.1 [Alexis Svinartchouk]

## 5.1.11 - 2020-12-07

* Don't use the O_SYNC flag for block devices, only O_DIRECT [Alexis Svinartchouk]

## 5.1.10 - 2020-12-02


<details>
<summary> Update balena-image-fs from 7.0.5 to 7.0.6 [Alexis Svinartchouk] </summary>

> ### balena-image-fs-7.0.6 - 2020-12-02
> 
> 
> <details>
> <summary> Update ext2fs from 3.0.4 to 3.0.5 [Alexis Svinartchouk] </summary>
> 
>> #### node-ext2fs-3.0.5 - 2020-12-02
>> 
>> * Fix reading and discarding with offsets > 32 bits [Alexis Svinartchouk]
>> 
> </details>
> 
> 
</details>

## 5.1.9 - 2020-12-01

* Add repo.yml file [Alexis Svinartchouk]
* Update @balena/udif from 1.1.0 to 1.1.1 [Alexis Svinartchouk]

<details>
<summary> Update zip-part-stream from 1.0.2 to 1.0.3 [Alexis Svinartchouk] </summary>

> ### zip-part-stream-1.0.3 - 2020-11-30
> 
> * Add versionbot changelog [Alexis Svinartchouk]
> 
</details>


<details>
<summary> Update node-raspberrypi-usbboot from 0.2.9 to 0.2.10 [Alexis Svinartchouk] </summary>

> ### node-raspberrypi-usbboot-0.2.10 - 2020-11-30
> 
> * Update typescript to v4.1.2 [Alexis Svinartchouk]
> * Add versionbot changelog [Alexis Svinartchouk]
> 
</details>


<details>
<summary> Update mountutils from 1.3.19 to 1.3.20 [Alexis Svinartchouk] </summary>

> ### mountutils-1.3.20 - 2020-11-30
> 
> * Add versionbot changelog [Alexis Svinartchouk]
> 
</details>


<details>
<summary> Update gzip-stream from 1.1.1 to 1.1.2 [Alexis Svinartchouk] </summary>

> ### gzip-stream-1.1.2 - 2020-11-30
> 
> * Add versionbot changelog [Alexis Svinartchouk]
> 
</details>


<details>
<summary> Update drivelist from 9.2.1 to 9.2.2 [Alexis Svinartchouk] </summary>

> ### drivelist-9.2.2 - 2020-11-30
> 
> * Update typescript to v4.1.2 [Alexis Svinartchouk]
> * Add versionbot changelog [Alexis Svinartchouk]
> 
</details>


<details>
<summary> Update blockmap from 4.0.2 to 4.0.3 [Alexis Svinartchouk] </summary>

> ### blockmap-4.0.3 - 2020-11-30
> 
> * Update typescript to v4.1.2 [Alexis Svinartchouk]
> * Add versionbot changelog [Alexis Svinartchouk]
> 
</details>


<details>
<summary> Update partitioninfo from 6.0.1 to 6.0.2 [Alexis Svinartchouk] </summary>

> ### partitioninfo-6.0.2 - 2020-11-27
> 
> 
> <details>
> <summary> Update file-disk from 8.0.0 to 8.0.1 [Alexis Svinartchouk] </summary>
> 
>> #### file-disk-8.0.1 - 2020-11-26
>> 
>> * Add versionbot changelog [Alexis Svinartchouk]
>> 
> </details>
> 
> * Add versionbot changelog [Alexis Svinartchouk]
> 
</details>


<details>
<summary> Update file-disk from 8.0.0 to 8.0.1 [Alexis Svinartchouk] </summary>

> ### file-disk-8.0.1 - 2020-11-26
> 
> * Add versionbot changelog [Alexis Svinartchouk]
> 
> ### file-disk-8.0.1 - 2020-11-26
> 
> * Add versionbot changelog [Alexis Svinartchouk]
> 
</details>


<details>
<summary> Update balena-image-fs from 7.0.4 to 7.0.5 [Alexis Svinartchouk] </summary>

> ### balena-image-fs-7.0.5 - 2020-11-27
> 
> 
> <details>
> <summary> Update file-disk from 8.0.0 to 8.0.1 [Alexis Svinartchouk] </summary>
> 
>> #### file-disk-8.0.1 - 2020-11-26
>> 
>> * Add versionbot changelog [Alexis Svinartchouk]
>> 
> </details>
> 
> 
> <details>
> <summary> Update ext2fs from 3.0.3 to 3.0.4 [Alexis Svinartchouk] </summary>
> 
>> #### node-ext2fs-3.0.4 - 2020-11-26
>> 
>> * Add versionbot changelog [Alexis Svinartchouk]
>> 
> </details>
> 
> 
> <details>
> <summary> Update partitioninfo from 6.0.1 to 6.0.2 [Alexis Svinartchouk] </summary>
> 
>> #### partitioninfo-6.0.2 - 2020-11-27
>> 
>> 
>> <details>
>> <summary> Update file-disk from 8.0.0 to 8.0.1 [Alexis Svinartchouk] </summary>
>> 
>>> ##### file-disk-8.0.1 - 2020-11-26
>>> 
>>> * Add versionbot changelog [Alexis Svinartchouk]
>>> 
>> </details>
>> 
>> * Add versionbot changelog [Alexis Svinartchouk]
>> 
> </details>
> 
> * Add versionbot changelog [Alexis Svinartchouk]
> 
</details>

# v5.1.8
## (2020-11-26)

* Add versionbot changelog [Alexis Svinartchouk]

# v5.1.7
## (2020-11-25)

* Don't start opening drives in advance to avoid unhandled rejections [Alexis Svinartchouk]

# v5.1.6
## (2020-11-24)

* Retry opening files & block devices on transient errors [Alexis Svinartchouk]
* Factorize retrying transient errors [Alexis Svinartchouk]
* Do not unmount source drives [Alexis Svinartchouk]

# v5.1.5
## (2020-11-20)

* Update typescript to 4.1.0 [Alexis Svinartchouk]
* Update drivelist to 9.2.1 [Alexis Svinartchouk]

# v5.1.4
## (2020-11-19)

* Update generated docs [Alexis Svinartchouk]
* Only run diskpart clean if the drive is open for writing [Alexis Svinartchouk]

# v5.1.3
## (2020-11-16)

* Limit lzma decompressor memory to 20% of total memory [Alexis Svinartchouk]

# v5.1.2
## (2020-11-13)

* Update resin-crc-utils -> @balena/node-crc-utils [Alexis Svinartchouk]

# v5.1.1
## (2020-11-05)

* Update generated docs [Alexis Svinartchouk]
* Update @balena/lint to 5.2.1 [Alexis Svinartchouk]
* Update balena-image-fs to ^7.0.4 [Alexis Svinartchouk]

# v5.1.0
## (2020-09-21)

* Export ImageJSON type [Alexis Svinartchouk]

# v5.0.0
## (2020-09-18)

* Remove no longer used fields in config examples [Alexis Svinartchouk]
* Use ?.() instead of testing !== undefined [Alexis Svinartchouk]
* Add format to BalenaS3CompressedSource metadata [Alexis Svinartchouk]
* Override BalenaS3CompressedSource format to 'zip' for yocto archives [Alexis Svinartchouk]
* BalenaS3CompressedSource.createReadStream returns a Readable [Alexis Svinartchouk]
* Determine s3 source prefix automatically if none is given [Alexis Svinartchouk]
* Include release in filename in s3 compressed source [Alexis Svinartchouk]
* Handle filename generation in s3 compressed source [Alexis Svinartchouk]
* Factorize downloading files in s3 compressed source [Alexis Svinartchouk]
* Add supervisorVersion, osVersion and lastModified to s3 compressed source metadata [Alexis Svinartchouk]
* Wifi config files are named balena-wifi-xx [Alexis Svinartchouk]
* Export BalenaS3SourceBase.isESRVersion static method [Alexis Svinartchouk]
* S3 compressed source 'format' parameter is not optional [Alexis Svinartchouk]
* Update gzip-stream to ^1.1.0 [Alexis Svinartchouk]
* Add support for specifying an AWS_SESSION_TOKEN for S3 sources [Alexis Svinartchouk]
* Unify s3 end s3 compressed examples [Alexis Svinartchouk]
* Update gzip-stream to ^1.0.1 [Alexis Svinartchouk]
* Remove default constructor parameters from BalenaS3Source [Alexis Svinartchouk]
* Handle aws4 signatures in Http and BalenaS3 sources [Alexis Svinartchouk]
* Remove unused gpt module typings [Alexis Svinartchouk]
* Download VERSION, VERSION_HOSTOS and device-type.json files for preloaded images [Alexis Svinartchouk]
* Add --asItIs option to avoid guessing the type and decompressing [Alexis Svinartchouk]
* BalenaS3CompressedSource class to be used in the image maker [Alexis Svinartchouk]
* Format example config.json file [Alexis Svinartchouk]
* Make host, prefix and release configurable in BalenaS3Source [Alexis Svinartchouk]
* Make BalenaS3Source prefix folder configurable [Alexis Svinartchouk]

# v4.1.30
## (2020-09-01)

* Update generated docs [Alexis Svinartchouk]
* Update balena-image-fs to ^7.0.1 [Alexis Svinartchouk]
* Revert "Disable trimming ext partitions on 32 bit windows" [Alexis Svinartchouk]

# v4.1.29
## (2020-08-27)

* Update generated docs [Alexis Svinartchouk]
* Disable trimming ext partitions on 32 bit windows [Alexis Svinartchouk]

# v4.1.28
## (2020-08-26)

* Update generated docs [Alexis Svinartchouk]
* Update typescript to ^4 and ts-node to ^9 [Alexis Svinartchouk]
* Fix calling start & stop methods on undefined usbboot scanner [Alexis Svinartchouk]

# v4.1.27
## (2020-08-26)

* Update generated docs [Alexis Svinartchouk]
* Fix off by one error in Http.createReadStream [Alexis Svinartchouk]

# v4.1.26
## (2020-08-25)

* Http size is undefined if it is NaN [Alexis Svinartchouk]

# v4.1.25
## (2020-08-24)

* Update generated docs [Alexis Svinartchouk]
* Use StreamLimiter on http streams in case the server doesn't support Ranges [Alexis Svinartchouk]

# v4.1.24
## (2020-08-20)

* Update generated docs [Alexis Svinartchouk]
* Update @balena/udif and use createReadStream end parameter [Alexis Svinartchouk]

# v4.1.23
## (2020-08-06)

* Update drivelist to ^9.1.0 [Alexis Svinartchouk]

# v4.1.22
## (2020-08-03)

* Update generated docs [Alexis Svinartchouk]
* Use only one module for crc32: cyclic-32 [Alexis Svinartchouk]
* Fix yargs boolean args in examples [Alexis Svinartchouk]

# v4.1.21
## (2020-08-03)

* Update generated docs [Alexis Svinartchouk]
* Use typedoc-plugin-markdown === 2.3.1 [Alexis Svinartchouk]
* Remove lodash [Alexis Svinartchouk]

# v4.1.20
## (2020-07-30)

* Update generated docs [Alexis Svinartchouk]
* Remove resin mentions [Alexis Svinartchouk]
* Remove bluebird [Alexis Svinartchouk]

# v4.1.19
## (2020-07-24)

* Update file-disk to ^6.0.3 [Alexis Svinartchouk]
* Update node-udif to ^1.0.3 [Alexis Svinartchouk]

# v4.1.18
## (2020-07-14)

* Update generated docs [Alexis Svinartchouk]
* Use tslib [Alexis Svinartchouk]
* Avoid unnecessary allocations in BlockTransformStream [Alexis Svinartchouk]
* Fix reading from /dev/zero [Alexis Svinartchouk]
* Add average speed in examples output when the size is not known [Alexis Svinartchouk]

# v4.1.17
## (2020-07-01)

* Update generated docs [Alexis Svinartchouk]
* Avoid reading after the source end [Alexis Svinartchouk]
* Fix using drive as source on windows in example [Alexis Svinartchouk]
* In the examples: fix opening /dev/rdiskX on macos, fix creating file [Alexis Svinartchouk]
* Always use BlockReadStream for reading from files [Alexis Svinartchouk]

# v4.1.16
## (2020-06-25)

* Update generated docs [Alexis Svinartchouk]
* Make multi-destination example work with http and block devices [Alexis Svinartchouk]
* Use GET instead of HEAD for getting image info [Alexis Svinartchouk]
* Update partitioninfo to ^5.3.5 [Alexis Svinartchouk]

# v4.1.15
## (2020-06-19)

* Update generated docs [Alexis Svinartchouk]
* Try - catch block around checkDiskSpace as it may fail [Alexis Svinartchouk]

# v4.1.14
## (2020-06-15)

* Emit attach events when drive mountpoints change [Alexis Svinartchouk]

# v4.1.13
## (2020-06-10)

* Avoid unnecessary awaits [Pagan Gazzard]

# v4.1.12
## (2020-06-09)

* Avoid creating a new readEndMarker on every read [Pagan Gazzard]

# v4.1.11
## (2020-06-09)

* Optimize progress calculation [Pagan Gazzard]

# v4.1.10
## (2020-06-09)

* Optimize lodash minBy/sortBy usage [Pagan Gazzard]

# v4.1.9
## (2020-06-08)

* Stop scanning before flashing in examples/multi-destination.ts [Alexis Svinartchouk]

# v4.1.8
## (2020-06-04)

* Revert "Don't use console.warn to avoid writing to stderr" [Alexis Svinartchouk]

# v4.1.7
## (2020-06-04)

* Update generated docs [Alexis Svinartchouk]
* Don't use console.warn to avoid writing to stderr [Alexis Svinartchouk]
* Fix typo [Alexis Svinartchouk]

# v4.1.6
## (2020-06-04)

* Nothing [Alexis Svinartchouk]
* Update generated docs [Alexis Svinartchouk]
* Alignment must be at most 4k [Alexis Svinartchouk]

# v4.1.5
## (2020-05-29)

* Don't create files when oWrite is not set [Alexis Svinartchouk]

# v4.1.4
## (2020-05-27)

* Update drivelist to v9.0.0 [Alexis Svinartchouk]

# v4.1.3
## (2020-05-11)

* Nothing [Alexis Svinartchouk]

# v4.1.2
## (2020-05-11)

* Update generated docs [Alexis Svinartchouk]

# v4.1.1
## (2020-05-11)

* Use estimated size in mutli-write: [Alexis Svinartchouk]

# v4.1.0
## (2020-05-08)

* In cases the uncompressed size is unknown, guess it from the partition table [Alexis Svinartchouk]

# v4.0.2
## (2020-05-07)

* Update generated docs [Alexis Svinartchouk]
* Update generated docs [Alexis Svinartchouk]
* Update unbzip2-stream [Alexis Svinartchouk]

# v4.0.1
## (2020-04-30)

* Implement correct speedometer [Alexis Svinartchouk]

# v4.0.0
## (2020-04-28)

* Update generated docs [Alexis Svinartchouk]
* Add sourceMetadata to PipeSourceToDestinationsResult [Alexis Svinartchouk]
* Add function for cleaning up temporary files [Alexis Svinartchouk]
* Emit progress events 4 times per second [Alexis Svinartchouk]
* Update typescript to 3.8.3, ts-node to 8.9.0 [Alexis Svinartchouk]
* Update resin-lint -> @balena/lint [Alexis Svinartchouk]
* Only test on node 10 and 12 [Alexis Svinartchouk]
* Option for decompressing first [Alexis Svinartchouk]
* Create destination file if it does not exist [Alexis Svinartchouk]
* Handle redirects and add option to avoid random acces in Http source [Alexis Svinartchouk]
* ConfiguredSource only takes a configure function, no config [Alexis Svinartchouk]
* Function pipeSourceToDestinations takes an options argument [Alexis Svinartchouk]
* Remove duplicated information from progress events [Alexis Svinartchouk]

# v3.0.1
## (2020-04-10)

* Add averageSpeed to progress events [Alexis Svinartchouk]

# v3.0.0
## (2020-04-07)

* Update generated docs [Alexis Svinartchouk]
* Use setF_NOCACHE on macos for block devices [Alexis Svinartchouk]
* Don't use O_EXLOCK on Windows [Alexis Svinartchouk]
* Retry incomplete reads [Alexis Svinartchouk]
* Stop using readable-stream [Alexis Svinartchouk]
* Update lzma-native to ^6.0.0 [Alexis Svinartchouk]
* Update udif to ^0.17.0 [Alexis Svinartchouk]
* ConfiguredSource constructor takes an options argument [Alexis Svinartchouk]
* BlockDevice constructor takes an options argument [Alexis Svinartchouk]
* File constructor takes an options object [Alexis Svinartchouk]
* Update blockmap to ^4.0.1 [Alexis Svinartchouk]
* Drop node8 support [Alexis Svinartchouk]
* BlockDeviceAdapter constructor takes an options argument [Alexis Svinartchouk]
* Update generated docs [Alexis Svinartchouk]
* Use aligned buffers to read and write block devices with O_DIRECT [Alexis Svinartchouk]
* Drop node 6 support [Alexis Svinartchouk]
* Use known buffers size when concatenating buffers [Alexis Svinartchouk]
* Don't use .then in asCallback implementation [Alexis Svinartchouk]

## 2.0.20 - 2020-03-09

* Lazy-load crc [Pagan Gazzard]
* Lazy-load mountutils [Pagan Gazzard]
* Lazy-load xxhash [Pagan Gazzard]
* Lazy-load node-raspberrypi-usbboot [Pagan Gazzard]

## 2.0.19 - 2020-03-09

* Update and typedoc / typedoc-plugin-markdown [Pagan Gazzard]

## 2.0.18 - 2020-03-06

* Use resin-lint for automatic lint fixing instead of prettier [Pagan Gazzard]

## 2.0.17 - 2020-02-05

* Update generated docs [Alexis Svinartchouk]
* Update resin-lint to ^3.2.0 [Alexis Svinartchouk]
* Don't throw in trimPartitions when can't list the partitions [Alexis Svinartchouk]

## 2.0.16 - 2020-01-13

* Always use node adapter (not xhr) for axios [Alexis Svinartchouk]
* Update generated docs [Alexis Svinartchouk]

## 2.0.15 - 2019-09-23

* Update generated docs [Alexis Svinartchouk]
* Update resin-lint [Alexis Svinartchouk]
* Update outdent to ^0.7.0 [Alexis Svinartchouk]

## 2.0.14 - 2019-09-06

* Formatting: unblock linter as it complains about formatting [Gergely Imreh]
* Dependencies: use upstream xxhash again, now that Node12 support is merged [Gergely Imreh]

## 2.0.13 - 2019-05-24

* Update dependencies for Node 12 support [Gergely Imreh]

## 2.0.12 - 2019-05-24

* Remove local file paths from docs [Alexis Svinartchouk]

## 2.0.11 - 2019-05-22

* Change remote url resin-io-modules -> balena-io-modules [Alexis Svinartchouk]

## 2.0.10 - 2019-05-13

* Add typedoc generated README [Alexis Svinartchouk]

## 2.0.9 - 2019-05-10

* ConfiguredSource.disk.recordReads set to false after configuration & trimming [Alexis Svinartchouk]

## 2.0.8 - 2019-05-10

* Add raspberry pi zero model name [Alexis Svinartchouk]

## 2.0.7 - 2019-05-09

* Win32: fix running diskpart when the tmp file path constains spaces [Alexis Svinartchouk]

## 2.0.6 - 2019-05-06

* Add CODEOWNERS file [Gergely Imreh]

## 2.0.5 - 2019-04-30

* Fix crc32 digest by padding it to always have 8 hex digits [Alexis Svinartchouk]

## 2.0.4 - 2019-04-30

* Fix progress in multi-write for gzipped sources [Alexis Svinartchouk]

## 2.0.3 - 2019-04-29

* Fix SparseFilterStream not calculating last block's checksum [Alexis Svinartchouk]

## 2.0.2 - 2019-04-29

* Fix off-by one error when computing size of block in bmap [David Lechner]
* Use proper bmap file for tests [David Lechner]

## 2.0.1 - 2019-04-18

* Merge adjacent blocks in DmgSource.getBlocks() [Alexis Svinartchouk]

## 2.0.0 - 2019-04-18

* Rework sparse streams, verify DMG images [Alexis Svinartchouk]

## 1.3.14 - 2019-04-10

* Add usbboot example [Alexis Svinartchouk]

## 1.3.13 - 2019-04-10

* Update blockmap to ^4.0.0 [Alexis Svinartchouk]

## 1.3.12 - 2019-03-21

* Fix examples [Alexis Svinartchouk]

## 1.3.11 - 2019-03-20

* Usbboot: Add "Linux File-Stor Gadget" to the description list [Juan Cruz Viotti]

## 1.3.10 - 2019-03-20

* Fix diskpart error message creation [Alexis Svinartchouk]

## 1.3.9 - 2019-03-20

* Upgrade node-raspberrypi-usbboot to v0.2.3 [Juan Cruz Viotti]

## 1.3.8 - 2019-03-20

* DriverlessDeviceAdapter only lists usbboot capable devices [Alexis Svinartchouk]

## 1.3.7 - 2019-03-20

* Node-raspberrypi-usbboot: Upgrade to v0.2.2 [Juan Cruz Viotti]

## 1.3.6 - 2019-03-20

* Update node-raspberrypi-usbboot to ^0.2.1 [Alexis Svinartchouk]

## 1.3.5 - 2019-03-19

* Update drivelist to ^8.0.4 [Alexis Svinartchouk]

## 1.3.4 - 2019-03-18

* Make UsbbootDrive.usbDevice public again [Alexis Svinartchouk]

## 1.3.3 - 2019-03-18

* Update drivelist to ^8.0.3 [Alexis Svinartchouk]

## 1.3.2 - 2019-03-13

* Add noUnusedLocals and noUnusedParameters to tsconfig.json [Alexis Svinartchouk]
* Update resin-lint to ^3.0.1 [Alexis Svinartchouk]

## 1.3.1 - 2019-03-08

* Test cases when no disk image is found in zip archives. [Alexis Svinartchouk]
* Autodrain does not emit finish as it never calls end(), the more appropriate event is end [Theodor Gherzan]

## 1.3.0 - 2019-03-05

* SingleUseStreamSource class and tests [Alexis Svinartchouk]
* Configurable filename matching function for zip sources [Alexis Svinartchouk]
* SourceDestination._getMetadata() returns {} instead of throwing. [Alexis Svinartchouk]
* Avoid re-reading source in ZipStreamSource. [Alexis Svinartchouk]

## 1.2.1 - 2019-03-04

* Exclude virtual drives [Robert Vojta]

## 1.2.0 - 2019-02-28

* Fall back to mimetype from content when extension fails. [Alexis Svinartchouk]
* Remove unused test images [Alexis Svinartchouk]

## 1.1.0 - 2019-02-27

* Throw an error when an inner source requires random reads. [Alexis Svinartchouk]

## 1.0.10 - 2019-02-26

* Fix writing on drives with >64KiB block sizes on windows [Alexis Svinartchouk]

## 1.0.9 - 2019-02-26

* Use winusb-driver-generator in a try as it may fail. [Alexis Svinartchouk]

## 1.0.8 - 2019-02-25

* Update drivelist to ^8.0.0 [Alexis Svinartchouk]

## 1.0.7 - 2019-02-14

* Update drivelist to ^7.0.1 [Alexis Svinartchouk]

## 1.0.6 - 2019-02-11

* Make http emit progress events [Theodor Gherzan]

## 1.0.5 - 2019-02-08

* Update node-raspberrypi-usbboot to ^0.1.0 [Alexis Svinartchouk]

## 1.0.4 - 2019-01-29

* Fix hash encoding [Theodor Gherzan]

## 1.0.3 - 2019-01-17

* Move lzma.ts to xz.ts to avoid confusion [Alexis Svinartchouk]

## 1.0.2 - 2019-01-16

* Don't try to get mbr logical partitions in getPartitions() [Alexis Svinartchouk]

## 1.0.1 - 2019-01-16

* Only import needed parts from bluebird [Alexis Svinartchouk]
* Rename ResinS3Source -> BalenaS3Source [Alexis Svinartchouk]
* Rename network config files resin-wifi-xx -> balena-wifi-xx [Alexis Svinartchouk]
* Resin -> balena rename [Alexis Svinartchouk]

## 1.0.0 - 2019-01-16

* Update partitioninfo to detect gpt at different offsets [Alexis Svinartchouk]

## 0.2.2 - 2019-01-11

* Use xxhash fork that fixes build with xcode 10.1 [Alexis Svinartchouk]
* Fix typo [Alexis Svinartchouk]

## 0.2.1 - 2019-01-11

* Winusb-driver-generator is optional (win32 only) [Alexis Svinartchouk]

## 0.2.0 - 2018-12-20

* Scanner.start() now returns a Promise<void> [Alexis Svinartchouk]
* Remove not needed class members from Scanner [Alexis Svinartchouk]

## 0.1.34 - 2018-12-19

* Ci: Update platforms to use new syntax [John (Jack) Brown]

## 0.1.33 - 2018-12-18

* Don't update multi write destination streams max listeners if < default [Alexis Svinartchouk]

## 0.1.32 - 2018-11-29

* Update file-disk to ^5.0.0 [Alexis Svinartchouk]

## 0.1.31 - 2018-11-28

* Add .wic as a supported image format [Alexis Svinartchouk]

## 0.1.30 - 2018-11-23

* Update(lzma-native): Update lzma-native to ^4.0.3 [Alexis Svinartchouk]
* Fix(scanner): Filter out drives with no size [Alexis Svinartchouk]

## 0.1.29 - 2018-11-21

* Fix(scanner): Filter out drives with no size [Alexis Svinartchouk]

## v0.1.28 - 2018-10-19

* Update(usbboot): Update node-raspberrypi-usbboot to 0.0.12 [Alexis Svinartchouk]

## v0.1.27 - 2018-10-18

* Update(usbboot): Update node-raspberrypi-usbboot to 0.0.10 [Alexis Svinartchouk]

## v0.1.26 - 2018-10-10

* Update(usbboot): Update node-raspberrypi-usbboot to 0.0.9 [Alexis Svinartchouk]

## v0.1.25 - 2018-10-10

* Update(usbboot): Update node-raspberrypi-usbboot to 0.0.8 [Alexis Svinartchouk]

## v0.1.24 - 2018-10-02

* Fix(usbboot): Fix usbboot devices display name [Alexis Svinartchouk]

## v0.1.23 - 2018-09-21

* Fix(resin-s3-source): Allow changing the s3 host [Alexis Svinartchouk]

## v0.1.22 - 2018-09-18

* Update(udif): Update udif to ^0.15.7 [Alexis Svinartchouk]

## v0.1.21 - 2018-09-18

* Fix(block-device): Fix BlockDevice.alignedRead() bytesRead property [Alexis Svinartchouk]

## v0.1.20 - 2018-09-18

* Update(resin-lint): Update resin-lint to ^2.0.1 [Alexis Svinartchouk]

## v0.1.19 - 2018-09-18

* Update(typescript): Update typescript to ^3.0.3 [Alexis Svinartchouk]

## v0.1.18 - 2018-09-17

* Fix(npm): Publish the typings folder [Alexis Svinartchouk]

## v0.1.17 - 2018-09-17

* Fix(http): Catch errors that may happen during a HEAD request [Alexis Svinartchouk]

## v0.1.16 - 2018-09-11

* Fix(errors): Set VerificationError.code to EVALIDATION [Alexis Svinartchouk]

## v0.1.15 - 2018-09-07

* Fix(tests): Don't unmount files in tests [Alexis Svinartchouk]

## v0.1.14 - 2018-09-07

* Blockdevice: Use aligned reads / writes on MacOS [Jonas Hermsmeier]

## v0.1.13 - 2018-09-06

* Fix(block-transform-stream): Flush last bytes [Alexis Svinartchouk]

## v0.1.12 - 2018-09-04

* Update(drivelist): Update drivelist to ^6.4.2 [Alexis Svinartchouk]

## v0.1.11 - 2018-09-03

* Fix(source-destination): Only emit progress events if needed [Alexis Svinartchouk]
* Fix(source-destination): Remove unused methods [Alexis Svinartchouk]

## v0.1.10 - 2018-09-03

* Feat(block-transform-stream): Faster writes for compressed images [Alexis Svinartchouk]
* Fix(lint): Fix linter errors [Alexis Svinartchouk]

## v0.1.9 - 2018-08-31

* Fix(package): Build before publishing [Alexis Svinartchouk]

## v0.1.8 - 2018-08-31

* Fix(package): Only publish built files [Alexis Svinartchouk]

## v0.1.7 - 2018-08-30

* Feat(gzip): Add isSizeEstimated=true in gzip images metadata [Alexis Svinartchouk]

## v0.1.6 - 2018-08-30

* Fix(block-write-stream): Fix block-write-stream tests [Alexis Svinartchouk]

## v0.1.5 - 2018-08-29

* Fix(block-write-stream): Write 1MiB blocks [Alexis Svinartchouk]

## v0.1.4 - 2018-08-29

* Fix(block-read-stream): Read 1MiB blocks instead of 64KiB blocks [Alexis Svinartchouk]

## v0.1.3 - 2018-08-28

* Update(drivelist): Update drivelist to ^6.4.1 [Alexis Svinartchouk]

## v0.1.2 - 2018-08-28

* Fix(file): Use BlockReadStream for File instances [Alexis Svinartchouk]

## v0.1.1 - 2018-08-28

* Fix(block-device): Don't unmount the drive before flashing on win32 [Alexis Svinartchouk]

* Fix(test): Don't crash if libusb is not available [Alexis Svinartchouk]
* Fix(examples): Fix the scanner example [Alexis Svinartchouk]
* Feat(progress): Report source file progress [Alexis Svinartchouk]
* Fix(progress): Fix makeClassEmitProgressEvents when start != 0 [Alexis Svinartchouk]
* Fix(lint): Add missing semicolons [Alexis Svinartchouk]
* Fix(examples): Update the spinner with the last progress event [Alexis Svinartchouk]
* Fix(lib): Fix type error with @types/bluebird@3.5.23 [Alexis Svinartchouk]
* Fix(lib): Fix getInnerSource for .DMG images [Alexis Svinartchouk]
* Chore(package): Clean build folder before building [Alexis Svinartchouk]
* Chore(package): Update readme, package, add license [Jonas Hermsmeier]
* Ci: Add .resinci.yml to control node build matrices [John (Jack) Brown]
* Fix(lib): Make block-write-stream chunk inputs [Jonas Hermsmeier]
* Chore(package): Add editorconfig [Jonas Hermsmeier]
* Refactor(constants): Reduce progress update frequency to 2 Hz [Jonas Hermsmeier]

## v0.1.0 - 2018-08-28

* Fix(ci): Install libudev-dev on ci [Alexis Svinartchouk]
* Fix(progress): Fallback to source progress on gzip streams [Alexis Svinartchouk]
* Fix(scanner): Export DriverlessDevice [Alexis Svinartchouk]
* Use the BlockDevice or File in read and write streams, not the fd [Alexis Svinartchouk]

